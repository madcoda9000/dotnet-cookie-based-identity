\hypertarget{_email_helper_8cs_source}{}\doxysection{Email\+Helper.\+cs}
\label{_email_helper_8cs_source}\index{/Users/sascha.heimann/Projects/dotnet-\/cookie-\/based-\/identity/DotNetIdentity/Helpers/EmailHelper.cs@{/Users/sascha.heimann/Projects/dotnet-\/cookie-\/based-\/identity/DotNetIdentity/Helpers/EmailHelper.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00001}00001 \textcolor{keyword}{using }System.Net;}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00002}00002 \textcolor{keyword}{using }System.Net.Mail;}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00003}00003 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_dot_net_identity_1_1_data}{DotNetIdentity.Data}};}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00004}00004 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_dot_net_identity_1_1_models_1_1_business_models}{DotNetIdentity.Models.BusinessModels}};}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00005}00005 \textcolor{keyword}{using }Microsoft.Extensions.Options;}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00006}00006 }
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00007}\mbox{\hyperlink{namespace_dot_net_identity_1_1_helpers}{00007}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_dot_net_identity_1_1_helpers}{DotNetIdentity.Helpers}}}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00008}00008 \{}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00012}\mbox{\hyperlink{class_dot_net_identity_1_1_helpers_1_1_email_helper}{00012}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_dot_net_identity_1_1_helpers_1_1_email_helper}{EmailHelper}}}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00013}00013     \{}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00017}00017         \textcolor{keyword}{private} ISettingsService \_sett;}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00018}00018 }
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00023}\mbox{\hyperlink{class_dot_net_identity_1_1_helpers_1_1_email_helper_a4f078ff24c99e2fc1fec03a72783fabe}{00023}}         \textcolor{keyword}{public} \mbox{\hyperlink{class_dot_net_identity_1_1_helpers_1_1_email_helper_a4f078ff24c99e2fc1fec03a72783fabe}{EmailHelper}}(ISettingsService sett)}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00024}00024         \{}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00025}00025             \_sett = sett;}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00026}00026         \}}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00027}00027 }
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00033}\mbox{\hyperlink{class_dot_net_identity_1_1_helpers_1_1_email_helper_a039078f9e8bf831ba45feb21e07e1f50}{00033}}         \textcolor{keyword}{public} async Task \mbox{\hyperlink{class_dot_net_identity_1_1_helpers_1_1_email_helper_a039078f9e8bf831ba45feb21e07e1f50}{SendAsync}}(\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_business_models_1_1_email_model}{EmailModel}} model)}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00034}00034         \{}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00035}00035             var mail = \textcolor{keyword}{new} MailMessage}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00036}00036             \{}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00037}00037                 Subject = model.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_business_models_1_1_email_model_af3519b77e5c01eb71a1bf226f7a94d8a}{Subject}},}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00038}00038                 Body = model.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_business_models_1_1_email_model_a513e918679cb444c6af866370d1d7d83}{Body}},}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00039}00039                 From = \textcolor{keyword}{new} MailAddress(\_sett.Mail.SmtpFromAddress!),}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00040}00040                 IsBodyHtml = \textcolor{keyword}{true}}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00041}00041             \};}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00042}00042             }
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00043}00043             var smtp = \textcolor{keyword}{new} SmtpClient}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00044}00044             \{                }
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00045}00045                 Host = \_sett.Mail.SmtpServer!,}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00046}00046                 Port = Convert.ToInt32(\_sett.Mail.SmtpPort),}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00047}00047                 EnableSsl = Convert.ToBoolean(\_sett.Mail.SmtpUseTls),}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00048}00048                 DeliveryMethod = SmtpDeliveryMethod.Network,}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00049}00049                 UseDefaultCredentials = \textcolor{keyword}{false},}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00050}00050                 Credentials = \textcolor{keyword}{new} NetworkCredential(\_sett.Mail.Username, \_sett.Mail.Password)}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00051}00051             \};}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00052}00052 }
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00053}00053             mail.To.Add(model.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_business_models_1_1_email_model_aaa2011ef9b583a81250966a56b011e6e}{To}});}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00055}00055             await smtp.SendMailAsync(mail);}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00056}00056         \}}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00057}00057     \}}
\DoxyCodeLine{\Hypertarget{_email_helper_8cs_source_l00058}00058 \}}

\end{DoxyCode}
