\hypertarget{_free_trial_expire_requirement_8cs_source}{}\doxysection{Free\+Trial\+Expire\+Requirement.\+cs}
\label{_free_trial_expire_requirement_8cs_source}\index{/Users/sascha.heimann/Projects/dotnet-\/cookie-\/based-\/identity/DotNetIdentity/IdentitySettings/Requirements/FreeTrialExpireRequirement.cs@{/Users/sascha.heimann/Projects/dotnet-\/cookie-\/based-\/identity/DotNetIdentity/IdentitySettings/Requirements/FreeTrialExpireRequirement.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00001}00001 \textcolor{keyword}{using }Microsoft.AspNetCore.Authorization;}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00002}00002 }
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00003}\mbox{\hyperlink{namespace_dot_net_identity_1_1_identity_settings_1_1_requirements}{00003}} \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_dot_net_identity_1_1_identity_settings_1_1_requirements}{DotNetIdentity.IdentitySettings.Requirements}}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00004}00004 \{}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00008}\mbox{\hyperlink{class_dot_net_identity_1_1_identity_settings_1_1_requirements_1_1_free_trial_expire_requirement}{00008}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_dot_net_identity_1_1_identity_settings_1_1_requirements_1_1_free_trial_expire_requirement}{FreeTrialExpireRequirement}} : IAuthorizationRequirement \{ \}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00009}00009 }
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00013}\mbox{\hyperlink{class_dot_net_identity_1_1_identity_settings_1_1_requirements_1_1_free_trial_expire_handler}{00013}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_dot_net_identity_1_1_identity_settings_1_1_requirements_1_1_free_trial_expire_handler}{FreeTrialExpireHandler}} : AuthorizationHandler<FreeTrialExpireRequirement>}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00014}00014     \{}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00021}\mbox{\hyperlink{class_dot_net_identity_1_1_identity_settings_1_1_requirements_1_1_free_trial_expire_handler_a5facb99d658f55439c377c65d4cc45c2}{00021}}         \textcolor{keyword}{protected} \textcolor{keyword}{override} Task \mbox{\hyperlink{class_dot_net_identity_1_1_identity_settings_1_1_requirements_1_1_free_trial_expire_handler_a5facb99d658f55439c377c65d4cc45c2}{HandleRequirementAsync}}(AuthorizationHandlerContext context, \mbox{\hyperlink{class_dot_net_identity_1_1_identity_settings_1_1_requirements_1_1_free_trial_expire_requirement}{FreeTrialExpireRequirement}} requirement)}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00022}00022         \{}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00023}00023             var freeTrialClaim = context.User.FindFirst(f => f.Type == \textcolor{stringliteral}{"{}FreeTrial"{}});}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00024}00024             \textcolor{keywordflow}{if} (freeTrialClaim != \textcolor{keyword}{null})}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00025}00025             \{}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00026}00026                 var freeTrialExpires = Convert.ToDateTime(freeTrialClaim.Value).AddDays(30);}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00027}00027                 \textcolor{keywordflow}{if} (DateTime.Now < freeTrialExpires)}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00028}00028                 \{}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00029}00029                     context.Succeed(requirement);}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00030}00030                 \}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00031}00031                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00032}00032                 \{}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00033}00033                     context.Fail();}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00034}00034                 \}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00035}00035             \}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00036}00036 }
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00037}00037             \textcolor{keywordflow}{return} Task.CompletedTask;}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00038}00038         \}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00039}00039     \}}
\DoxyCodeLine{\Hypertarget{_free_trial_expire_requirement_8cs_source_l00040}00040 \}}

\end{DoxyCode}
