\hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller}{}\doxysection{Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller Class Reference}
\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller}\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}


Controller Class for Admin views  




Inheritance diagram for Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=212pt]{class_dot_net_identity_1_1_controllers_1_1_admin_controller__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a01af9770fe99667e4e948e3c5322c7be}{Admin\+Controller}} (IString\+Localizer$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_user_controller}{User\+Controller}} $>$ localizer, \mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{App\+Db\+Context}} db, ILogger$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller}{Admin\+Controller}} $>$ log, IConfiguration conf, User\+Manager$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_user}{App\+User}} $>$ user\+Manager, Role\+Manager$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_role}{App\+Role}} $>$ role\+Manager, Sign\+In\+Manager$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_user}{App\+User}} $>$ sign\+In\+Manager)
\begin{DoxyCompactList}\small\item\em Controller Class constructor \end{DoxyCompactList}\item 
IAction\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a5f4b2842f8473f14a5e10470d3bd1d5b}{Index}} ()
\begin{DoxyCompactList}\small\item\em Controller Action for Index \end{DoxyCompactList}\item 
IAction\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a013444bd9f40b5a78e04c0c7a2463736}{System\+Logs}} ()
\begin{DoxyCompactList}\small\item\em Controller Action for System\+Logs \end{DoxyCompactList}\item 
IAction\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a56a981db0e34d5b95d97da053d59f90c}{Audit\+Logs}} ()
\begin{DoxyCompactList}\small\item\em Controller Action for Autdit\+Logs \end{DoxyCompactList}\item 
IAction\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a21e35248bf081cd805ef51cbeb87f729}{Error\+Logs}} ()
\begin{DoxyCompactList}\small\item\em Controller Action for Error\+Logs \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a190d9931cae4a99e50d8f47730b8445e}{Users}} ()
\begin{DoxyCompactList}\small\item\em Controller Action for Users \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a35b4e53a2140e145b65b14f83f490c1e}{Roles}} ()
\begin{DoxyCompactList}\small\item\em Controller Action for Roles \end{DoxyCompactList}\item 
IAction\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a33a0ae1d862e6fc8fe837379f1e71871}{Get\+Error\+Logs}} (Data\+Request request)
\begin{DoxyCompactList}\small\item\em Controller Post Method to fetch Error\+Logs \end{DoxyCompactList}\item 
IAction\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ae837cd1bca6ffa486e8ef1d124be8c45}{Get\+App\+Logs}} (Data\+Request request)
\begin{DoxyCompactList}\small\item\em Controller Post Method to fetch Applicationlogs \end{DoxyCompactList}\item 
IAction\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a765780fbe678b84fb1532c873f761015}{Get\+Audit\+Logs}} (Data\+Request request)
\begin{DoxyCompactList}\small\item\em Controller Post Method to fetch Audit\+Logs \end{DoxyCompactList}\item 
Json\+Result \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ab36c5deb1c4f3f99e316543f66b40b58}{Get\+Users}} (Data\+Request request)
\begin{DoxyCompactList}\small\item\em Controller Post Method to fetch Users \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_adaca6a26e3d091e4670aa37d0aa26095}{New\+User}} ()
\begin{DoxyCompactList}\small\item\em Controller Action for New\+User view \end{DoxyCompactList}\item 
async Task$<$ Action\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a64bc568ac775c29e358c37f1b6eb9a6f}{New\+User}} (\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model}{New\+User\+Model}} view\+Model)
\begin{DoxyCompactList}\small\item\em controler Post Method to save a new User \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a9da4db41821b95a045487b957546ad4e}{Upsert\+Role}} (string? id)
\begin{DoxyCompactList}\small\item\em Controller Action for view Upsert\+Role \end{DoxyCompactList}\item 
async Task$<$ Action\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a868434f4412ed75643c1e09b3772896e}{Disable\+User}} (string User\+Id)
\begin{DoxyCompactList}\small\item\em Controller GET Method to disable a user account \end{DoxyCompactList}\item 
async Task$<$ Action\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_acafca207dc626b8405c100dae372339e}{Enable\+User}} (string User\+Id)
\begin{DoxyCompactList}\small\item\em Controller GET Method to enable a user account \end{DoxyCompactList}\item 
async Task$<$ Action\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a968549db1c46319c67839ab9a29db384}{Enable\+Ldap\+Login}} (string User\+Id)
\begin{DoxyCompactList}\small\item\em Controller GET Method to enable ldap login for a user account \end{DoxyCompactList}\item 
async Task$<$ Action\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_adec1057b9574f3fdb012e75c5c425409}{Disable\+Ldap\+Login}} (string User\+Id)
\begin{DoxyCompactList}\small\item\em Controller GET Method to disable ldap login for a user account \end{DoxyCompactList}\item 
async Task$<$ Action\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a717d7b1ad7653611b7cd5b507bdedeb1}{Enable\+Mfa\+Force}} (string User\+Id)
\begin{DoxyCompactList}\small\item\em Controller GET Method to enable mfa enforcement for a user account \end{DoxyCompactList}\item 
async Task$<$ Action\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a17c792f0c3526066cfca21d73fabd569}{Disable\+Mfa\+Force}} (string User\+Id)
\begin{DoxyCompactList}\small\item\em Controller GET Method to disable mfa enforcement for a user account \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a94f52c0e032a774cc8d1590d6688d101}{Upsert\+Role}} (\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model}{Upsert\+Role\+View\+Model}} view\+Model)
\begin{DoxyCompactList}\small\item\em Controller POST Method to enable a user account \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ab1c7981b89ddff2100c7bd201cf45766}{Delete\+User}} (string id)
\begin{DoxyCompactList}\small\item\em Controller POST Method to delete a user account \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_aa570b5cef28f1c3dda939971a2bc0f44}{Delete\+Role}} (string id)
\begin{DoxyCompactList}\small\item\em Controller POST Method to enable a role \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_afe437521759b5fd93d0bb4bbbddfce15}{Edit\+User}} (string id)
\begin{DoxyCompactList}\small\item\em Controller action to serve the Edit\+User\+View \end{DoxyCompactList}\item 
async Task$<$ IAction\+Result $>$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a5af2b4d9b15eee2ef5d28600aacc6ace}{Edit\+User}} (\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model}{Edit\+User\+View\+Model}} view\+Model)
\begin{DoxyCompactList}\small\item\em Controller POST Method to save user changes \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Controller Class for Admin views 

Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00024}{24}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a01af9770fe99667e4e948e3c5322c7be}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a01af9770fe99667e4e948e3c5322c7be}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!AdminController@{AdminController}}
\index{AdminController@{AdminController}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{AdminController()}{AdminController()}}
{\footnotesize\ttfamily Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Admin\+Controller (\begin{DoxyParamCaption}\item[{IString\+Localizer$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_user_controller}{User\+Controller}} $>$}]{localizer,  }\item[{\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{App\+Db\+Context}}}]{db,  }\item[{ILogger$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_controllers_1_1_admin_controller}{Admin\+Controller}} $>$}]{log,  }\item[{IConfiguration}]{conf,  }\item[{User\+Manager$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_user}{App\+User}} $>$}]{user\+Manager,  }\item[{Role\+Manager$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_role}{App\+Role}} $>$}]{role\+Manager,  }\item[{Sign\+In\+Manager$<$ \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_user}{App\+User}} $>$}]{sign\+In\+Manager }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller Class constructor 


\begin{DoxyParams}{Parameters}
{\em localizer} & type IString\+Localizer\\
\hline
{\em db} & type \mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{Dot\+Net\+Identity.\+Data.\+App\+Db\+Context}}\\
\hline
{\em log} & type Microsoft.\+Extensions.\+Logging.\+ILogger\\
\hline
{\em conf} & type Microsoft.\+Extensions.\+Configuration.\+IConfiguration\\
\hline
{\em user\+Manager} & type Microsoft.\+Asp\+Net\+Core.\+Identity.\+User\+Manager\\
\hline
{\em role\+Manager} & type Microsoft.\+Asp\+Net\+Core.\+Identity.\+Role\+Manager\\
\hline
{\em sign\+In\+Manager} & type Microsoft.\+Asp\+Net\+Core.\+Identity.\+Sign\+In\+Manager\\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00065}{65}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00066         \{}
\DoxyCodeLine{00067             \_userManager = userManager;}
\DoxyCodeLine{00068             \_roleManager = roleManager;}
\DoxyCodeLine{00069             \_signInManager = signInManager;}
\DoxyCodeLine{00070             \_configuration = conf;}
\DoxyCodeLine{00071             \_logger = log;}
\DoxyCodeLine{00072             \_context = db;}
\DoxyCodeLine{00073             \_localizer = localizer;}
\DoxyCodeLine{00074         \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a56a981db0e34d5b95d97da053d59f90c}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a56a981db0e34d5b95d97da053d59f90c}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!AuditLogs@{AuditLogs}}
\index{AuditLogs@{AuditLogs}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{AuditLogs()}{AuditLogs()}}
{\footnotesize\ttfamily IAction\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Audit\+Logs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Controller Action for Autdit\+Logs 

\begin{DoxyReturn}{Returns}
View of type Dotnet\+Identity.\+Views.\+Admin.\+Audit\+Logs
\end{DoxyReturn}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_aa570b5cef28f1c3dda939971a2bc0f44}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_aa570b5cef28f1c3dda939971a2bc0f44}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!DeleteRole@{DeleteRole}}
\index{DeleteRole@{DeleteRole}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{DeleteRole()}{DeleteRole()}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Delete\+Role (\begin{DoxyParamCaption}\item[{string}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller POST Method to enable a role 


\begin{DoxyParams}{Parameters}
{\em id} & id of the role\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
redirect to controller action Roles
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00423}{423}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00424         \{}
\DoxyCodeLine{00425             var role = await \_roleManager.FindByIdAsync(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00426             \textcolor{keywordflow}{if} (role != \textcolor{keyword}{null})}
\DoxyCodeLine{00427             \{}
\DoxyCodeLine{00428                 var result = await \_roleManager.DeleteAsync(role);}
\DoxyCodeLine{00429                 \textcolor{keywordflow}{if} (!result.Succeeded)}
\DoxyCodeLine{00430                 \{}
\DoxyCodeLine{00431                     result.Errors.ToList().ForEach(f => ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, f.Description));}
\DoxyCodeLine{00432                 \}}
\DoxyCodeLine{00433             \}}
\DoxyCodeLine{00434             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00435             \{}
\DoxyCodeLine{00436                 ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, \_localizer[\textcolor{stringliteral}{"{}3"{}}]);}
\DoxyCodeLine{00437             \}}
\DoxyCodeLine{00438             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} deleted role "{}} + \textcolor{keywordtype}{id});}
\DoxyCodeLine{00439             \textcolor{keywordflow}{return} RedirectToAction(\textcolor{stringliteral}{"{}Roles"{}});}
\DoxyCodeLine{00440         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ab1c7981b89ddff2100c7bd201cf45766}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ab1c7981b89ddff2100c7bd201cf45766}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!DeleteUser@{DeleteUser}}
\index{DeleteUser@{DeleteUser}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{DeleteUser()}{DeleteUser()}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Delete\+User (\begin{DoxyParamCaption}\item[{string}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller POST Method to delete a user account 


\begin{DoxyParams}{Parameters}
{\em id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
redirect to controller action Users
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00403}{403}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00403                                                                \{}
\DoxyCodeLine{00404             var user = await \_userManager.FindByIdAsync(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00405             \textcolor{keywordflow}{if}(user!=\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00406                 var result = await \_userManager.DeleteAsync(user);}
\DoxyCodeLine{00407                 \textcolor{keywordflow}{if}(!result.Succeeded) \{}
\DoxyCodeLine{00408                     result.Errors.ToList().ForEach(f => ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, f.Description));}
\DoxyCodeLine{00409                 \}}
\DoxyCodeLine{00410             \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00411                 ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, \_localizer[\textcolor{stringliteral}{"{}2"{}}]);}
\DoxyCodeLine{00412             \}}
\DoxyCodeLine{00413             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} deleted user "{}} + \textcolor{keywordtype}{id});}
\DoxyCodeLine{00414             \textcolor{keywordflow}{return} RedirectToAction(\textcolor{stringliteral}{"{}Users"{}});}
\DoxyCodeLine{00415         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_adec1057b9574f3fdb012e75c5c425409}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_adec1057b9574f3fdb012e75c5c425409}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!DisableLdapLogin@{DisableLdapLogin}}
\index{DisableLdapLogin@{DisableLdapLogin}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{DisableLdapLogin()}{DisableLdapLogin()}}
{\footnotesize\ttfamily async Task$<$ Action\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Disable\+Ldap\+Login (\begin{DoxyParamCaption}\item[{string}]{User\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller GET Method to disable ldap login for a user account 


\begin{DoxyParams}{Parameters}
{\em User\+Id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
json object (true / false)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00314}{314}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00314                                                                         \{}
\DoxyCodeLine{00315             var user = await \_userManager.FindByIdAsync(UserId);}
\DoxyCodeLine{00316             \textcolor{keywordflow}{if}(user==\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00317                 \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{ success = \textcolor{keyword}{false} \});}
\DoxyCodeLine{00318             \}}
\DoxyCodeLine{00319             user.IsLdapLogin = \textcolor{keyword}{false};}
\DoxyCodeLine{00320             await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00321             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} disabled ldap login for user "{}} + user.UserName);}
\DoxyCodeLine{00322             \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{success = \textcolor{keyword}{true}\});}
\DoxyCodeLine{00323         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a17c792f0c3526066cfca21d73fabd569}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a17c792f0c3526066cfca21d73fabd569}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!DisableMfaForce@{DisableMfaForce}}
\index{DisableMfaForce@{DisableMfaForce}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{DisableMfaForce()}{DisableMfaForce()}}
{\footnotesize\ttfamily async Task$<$ Action\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Disable\+Mfa\+Force (\begin{DoxyParamCaption}\item[{string}]{User\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller GET Method to disable mfa enforcement for a user account 


\begin{DoxyParams}{Parameters}
{\em User\+Id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
json object (true / false)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00348}{348}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00348                                                                        \{}
\DoxyCodeLine{00349             var user = await \_userManager.FindByIdAsync(UserId);}
\DoxyCodeLine{00350             \textcolor{keywordflow}{if}(user==\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00351                 \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{ success = \textcolor{keyword}{false} \});}
\DoxyCodeLine{00352             \}}
\DoxyCodeLine{00353             user.IsMfaForce = \textcolor{keyword}{false};}
\DoxyCodeLine{00354             await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00355             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} disabled mfa enforce for user "{}} + user.UserName);}
\DoxyCodeLine{00356             \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{success = \textcolor{keyword}{true}\});}
\DoxyCodeLine{00357         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a868434f4412ed75643c1e09b3772896e}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a868434f4412ed75643c1e09b3772896e}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!DisableUser@{DisableUser}}
\index{DisableUser@{DisableUser}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{DisableUser()}{DisableUser()}}
{\footnotesize\ttfamily async Task$<$ Action\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Disable\+User (\begin{DoxyParamCaption}\item[{string}]{User\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller GET Method to disable a user account 


\begin{DoxyParams}{Parameters}
{\em User\+Id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
json object (true / false)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00263}{263}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00263                                                                    \{}
\DoxyCodeLine{00264             var user = await \_userManager.FindByIdAsync(UserId);}
\DoxyCodeLine{00265             \textcolor{keywordflow}{if}(user==\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00266                 \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{ success = \textcolor{keyword}{false} \});}
\DoxyCodeLine{00267             \}}
\DoxyCodeLine{00268             user.IsEnabled = \textcolor{keyword}{false};}
\DoxyCodeLine{00269             await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00270             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} disabled user "{}} + user.UserName);}
\DoxyCodeLine{00271             \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{success = \textcolor{keyword}{true}\});}
\DoxyCodeLine{00272         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a5af2b4d9b15eee2ef5d28600aacc6ace}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a5af2b4d9b15eee2ef5d28600aacc6ace}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!EditUser@{EditUser}}
\index{EditUser@{EditUser}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{EditUser()}{EditUser()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Edit\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model}{Edit\+User\+View\+Model}}}]{view\+Model }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller POST Method to save user changes 


\begin{DoxyParams}{Parameters}
{\em view\+Model} & a model of type Dotnetidentity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
view of type Dotnetidentity.\+Views.\+Admin.\+Edit\+User
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00480}{480}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00481         \{}
\DoxyCodeLine{00482             \textcolor{keywordflow}{if} (ModelState.IsValid)}
\DoxyCodeLine{00483             \{}
\DoxyCodeLine{00484                 var user = await \_userManager.FindByIdAsync(viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_a44d3f139f58eb560e41f2c228c00b18b}{Id}});}
\DoxyCodeLine{00485                 \textcolor{keywordflow}{if} (user != \textcolor{keyword}{null})}
\DoxyCodeLine{00486                 \{}
\DoxyCodeLine{00487                     \textcolor{keywordflow}{if} (user.PhoneNumber != viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_a0766c2ef3010d290973d1981e4afcbde}{PhoneNumber}} \&\& \_userManager.Users.Any(a => a.PhoneNumber == viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_a0766c2ef3010d290973d1981e4afcbde}{PhoneNumber}}))}
\DoxyCodeLine{00488                     \{}
\DoxyCodeLine{00489                         ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, \_localizer[\textcolor{stringliteral}{"{}4"{}}]);}
\DoxyCodeLine{00490                     \}}
\DoxyCodeLine{00491                     \textcolor{keywordflow}{else}}
\DoxyCodeLine{00492                     \{}
\DoxyCodeLine{00493                         user.FirstName = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_a1ce72dd9e8f4eb8ce20e37fb247e486d}{FirstName}};}
\DoxyCodeLine{00494                         user.LastName = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_a4c0545e46724baab75383047c6003a4a}{LastName}};}
\DoxyCodeLine{00495                         user.UserName = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_ad8cb8b8701e79ab226979d760e38ac04}{UserName}};}
\DoxyCodeLine{00496                         user.Email = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_a93cb61f5c47ffe5a6271b25151464161}{Email}};}
\DoxyCodeLine{00497                         user.PhoneNumber = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_a0766c2ef3010d290973d1981e4afcbde}{PhoneNumber}};}
\DoxyCodeLine{00498                         user.Gender = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_ab987b2e7b390141dd86a7ba4ca2c93fd}{Gender}};}
\DoxyCodeLine{00499                         user.Department = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_ac769e7bcadc47007228186b011ed0512}{Department}}.ToString();}
\DoxyCodeLine{00500 }
\DoxyCodeLine{00501                         var result = await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00502                         \textcolor{keywordflow}{if} (result.Succeeded)}
\DoxyCodeLine{00503                         \{}
\DoxyCodeLine{00504                             \textcolor{comment}{// Roles}}
\DoxyCodeLine{00505                             \textcolor{keywordflow}{foreach} (var item \textcolor{keywordflow}{in} viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_afb203b91eacf83ed47dd236a546de57e}{Roles}})}
\DoxyCodeLine{00506                             \{}
\DoxyCodeLine{00507                                 \textcolor{keywordflow}{if} (item.IsAssigned)}
\DoxyCodeLine{00508                                 \{}
\DoxyCodeLine{00509                                     await \_userManager.AddToRoleAsync(user, item.RoleName);}
\DoxyCodeLine{00510                                 \}}
\DoxyCodeLine{00511                                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00512                                 \{}
\DoxyCodeLine{00513                                     await \_userManager.RemoveFromRoleAsync(user, item.RoleName);}
\DoxyCodeLine{00514                                 \}}
\DoxyCodeLine{00515                             \}}
\DoxyCodeLine{00516 }
\DoxyCodeLine{00517                             \textcolor{comment}{// roles combined}}
\DoxyCodeLine{00518                             var rls = await \_userManager.GetRolesAsync(user);}
\DoxyCodeLine{00519                             \textcolor{keywordflow}{if} (rls != \textcolor{keyword}{null})}
\DoxyCodeLine{00520                             \{}
\DoxyCodeLine{00521                                 var rlsComb = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00522                                 \textcolor{keywordflow}{if} (rls.Count() > 0 \&\& rls.Count() <= 1)}
\DoxyCodeLine{00523                                 \{}
\DoxyCodeLine{00524                                     rlsComb = rls[0].ToString();}
\DoxyCodeLine{00525                                 \}}
\DoxyCodeLine{00526                                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00527                                 \{}
\DoxyCodeLine{00528                                     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < rls.Count; i++)}
\DoxyCodeLine{00529                                     \{}
\DoxyCodeLine{00530                                         \textcolor{keywordflow}{if} (i + 1 != rls.Count) \{ rlsComb += rls[i] + \textcolor{stringliteral}{"{},"{}}; \}}
\DoxyCodeLine{00531                                         \textcolor{keywordflow}{else} \{ rlsComb += rls[i]; \}}
\DoxyCodeLine{00532                                     \}}
\DoxyCodeLine{00533                                 \}}
\DoxyCodeLine{00534                                 \textcolor{keywordflow}{if} (rlsComb.Length > 0)}
\DoxyCodeLine{00535                                 \{}
\DoxyCodeLine{00536                                     user.RolesCombined = rlsComb;}
\DoxyCodeLine{00537                                     await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00538                                 \}}
\DoxyCodeLine{00539                             \}}
\DoxyCodeLine{00540 }
\DoxyCodeLine{00541                             \textcolor{comment}{// Claims}}
\DoxyCodeLine{00542                             var userClaims = await \_userManager.GetClaimsAsync(user);}
\DoxyCodeLine{00543                             var departmentClaim = userClaims.FirstOrDefault(a => a.Type == \textcolor{stringliteral}{"{}Department"{}});}
\DoxyCodeLine{00544                             var claimsToAdd = \textcolor{keyword}{new} Claim(\textcolor{stringliteral}{"{}Department"{}}, Enum.GetName(viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model_ac769e7bcadc47007228186b011ed0512}{Department}})!);}
\DoxyCodeLine{00545                             \textcolor{keywordflow}{if} (departmentClaim != \textcolor{keyword}{null})}
\DoxyCodeLine{00546                             \{}
\DoxyCodeLine{00547                                 await \_userManager.ReplaceClaimAsync(user, departmentClaim, claimsToAdd);}
\DoxyCodeLine{00548                             \}}
\DoxyCodeLine{00549                             \textcolor{keywordflow}{else}}
\DoxyCodeLine{00550                             \{}
\DoxyCodeLine{00551                                 await \_userManager.AddClaimAsync(user, claimsToAdd);}
\DoxyCodeLine{00552                             \}}
\DoxyCodeLine{00553                             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} modified user "{}} + user.UserName);}
\DoxyCodeLine{00554                             \textcolor{keywordflow}{return} RedirectToAction(\textcolor{stringliteral}{"{}Users"{}});}
\DoxyCodeLine{00555                         \}}
\DoxyCodeLine{00556                         result.Errors.ToList().ForEach(f => ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, f.Description));}
\DoxyCodeLine{00557                     \}}
\DoxyCodeLine{00558                 \}}
\DoxyCodeLine{00559                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00560                 \{}
\DoxyCodeLine{00561                     ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, \_localizer[\textcolor{stringliteral}{"{}2"{}}]);}
\DoxyCodeLine{00562                 \}}
\DoxyCodeLine{00563             \}}
\DoxyCodeLine{00564             }
\DoxyCodeLine{00565             \textcolor{keywordflow}{return} View(viewModel);}
\DoxyCodeLine{00566         \}}

\end{DoxyCode}


References \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00037}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Department}}, \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00022}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Email}}, \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00047}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+First\+Name}}, \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00032}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Gender}}, \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00012}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Id}}, \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00052}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Last\+Name}}, \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00027}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Phone\+Number}}, \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00042}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Roles}}, and \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00017}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+User\+Name}}.

\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_afe437521759b5fd93d0bb4bbbddfce15}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_afe437521759b5fd93d0bb4bbbddfce15}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!EditUser@{EditUser}}
\index{EditUser@{EditUser}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{EditUser()}{EditUser()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Edit\+User (\begin{DoxyParamCaption}\item[{string}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller action to serve the Edit\+User\+View 


\begin{DoxyParams}{Parameters}
{\em id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
view of type \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model}}
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00447}{447}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00448         \{}
\DoxyCodeLine{00449             var user = await \_userManager.FindByIdAsync(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00450             \textcolor{keywordflow}{if} (user == \textcolor{keyword}{null})}
\DoxyCodeLine{00451             \{}
\DoxyCodeLine{00452                 \textcolor{keywordflow}{return} RedirectToAction(\textcolor{stringliteral}{"{}Users"{}});}
\DoxyCodeLine{00453             \}}
\DoxyCodeLine{00454             var viewModel = user.Adapt<\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_edit_user_view_model}{EditUserViewModel}}>();}
\DoxyCodeLine{00455 }
\DoxyCodeLine{00456             var userRoles = await \_userManager.GetRolesAsync(user);}
\DoxyCodeLine{00457             viewModel.Roles = await \_roleManager.Roles.Select(s => \textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_assign_role_view_model}{AssignRoleViewModel}}}
\DoxyCodeLine{00458             \{}
\DoxyCodeLine{00459                 RoleId = s.Id,}
\DoxyCodeLine{00460                 RoleName = s.Name,}
\DoxyCodeLine{00461                 IsAssigned = userRoles.Any(a => a == s.Name)}
\DoxyCodeLine{00462             \}).ToListAsync();}
\DoxyCodeLine{00463 }
\DoxyCodeLine{00464             var userClaims = await \_userManager.GetClaimsAsync(user);}
\DoxyCodeLine{00465             var departmentClaim = userClaims.FirstOrDefault(f => f.Type == \textcolor{stringliteral}{"{}Department"{}});}
\DoxyCodeLine{00466             \textcolor{keywordflow}{if} (departmentClaim != \textcolor{keyword}{null})}
\DoxyCodeLine{00467             \{}
\DoxyCodeLine{00468                 viewModel.Department = Enum.Parse<\mbox{\hyperlink{namespace_dot_net_identity_1_1_models_a0c2566102c085d8fb8859ba2cc48f7f5}{Department}}>(departmentClaim.Value);}
\DoxyCodeLine{00469             \}}
\DoxyCodeLine{00470             }
\DoxyCodeLine{00471             \textcolor{keywordflow}{return} View(viewModel);}
\DoxyCodeLine{00472         \}}

\end{DoxyCode}


References \mbox{\hyperlink{_edit_user_view_model_8cs_source_l00042}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Edit\+User\+View\+Model.\+Roles}}.

\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a968549db1c46319c67839ab9a29db384}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a968549db1c46319c67839ab9a29db384}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!EnableLdapLogin@{EnableLdapLogin}}
\index{EnableLdapLogin@{EnableLdapLogin}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{EnableLdapLogin()}{EnableLdapLogin()}}
{\footnotesize\ttfamily async Task$<$ Action\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Enable\+Ldap\+Login (\begin{DoxyParamCaption}\item[{string}]{User\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller GET Method to enable ldap login for a user account 


\begin{DoxyParams}{Parameters}
{\em User\+Id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
json object (true / false)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00297}{297}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00297                                                                        \{}
\DoxyCodeLine{00298             var user = await \_userManager.FindByIdAsync(UserId);}
\DoxyCodeLine{00299             \textcolor{keywordflow}{if}(user==\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00300                 \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{ success = \textcolor{keyword}{false} \});}
\DoxyCodeLine{00301             \}}
\DoxyCodeLine{00302             user.IsLdapLogin = \textcolor{keyword}{true};}
\DoxyCodeLine{00303             await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00304             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} enabled LDAP login for user "{}} + user.UserName);}
\DoxyCodeLine{00305             \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{success = \textcolor{keyword}{true}\});}
\DoxyCodeLine{00306         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a717d7b1ad7653611b7cd5b507bdedeb1}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a717d7b1ad7653611b7cd5b507bdedeb1}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!EnableMfaForce@{EnableMfaForce}}
\index{EnableMfaForce@{EnableMfaForce}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{EnableMfaForce()}{EnableMfaForce()}}
{\footnotesize\ttfamily async Task$<$ Action\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Enable\+Mfa\+Force (\begin{DoxyParamCaption}\item[{string}]{User\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller GET Method to enable mfa enforcement for a user account 


\begin{DoxyParams}{Parameters}
{\em User\+Id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
json object (true / false)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00331}{331}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00331                                                                       \{}
\DoxyCodeLine{00332             var user = await \_userManager.FindByIdAsync(UserId);}
\DoxyCodeLine{00333             \textcolor{keywordflow}{if}(user==\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00334                 \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{ success = \textcolor{keyword}{false} \});}
\DoxyCodeLine{00335             \}}
\DoxyCodeLine{00336             user.IsMfaForce = \textcolor{keyword}{true};}
\DoxyCodeLine{00337             await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00338             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} enabled mfa enforce for user "{}} + user.UserName);}
\DoxyCodeLine{00339             \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{success = \textcolor{keyword}{true}\});}
\DoxyCodeLine{00340         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_acafca207dc626b8405c100dae372339e}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_acafca207dc626b8405c100dae372339e}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!EnableUser@{EnableUser}}
\index{EnableUser@{EnableUser}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{EnableUser()}{EnableUser()}}
{\footnotesize\ttfamily async Task$<$ Action\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Enable\+User (\begin{DoxyParamCaption}\item[{string}]{User\+Id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller GET Method to enable a user account 


\begin{DoxyParams}{Parameters}
{\em User\+Id} & the id of the user\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
json object (true / false)
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00280}{280}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00280                                                                   \{}
\DoxyCodeLine{00281             var user = await \_userManager.FindByIdAsync(UserId);}
\DoxyCodeLine{00282             \textcolor{keywordflow}{if}(user==\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00283                 \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{ success = \textcolor{keyword}{false} \});}
\DoxyCodeLine{00284             \}}
\DoxyCodeLine{00285             user.IsEnabled = \textcolor{keyword}{true};}
\DoxyCodeLine{00286             await \_userManager.UpdateAsync(user);}
\DoxyCodeLine{00287             \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} enabled user "{}} + user.UserName);}
\DoxyCodeLine{00288             \textcolor{keywordflow}{return} Json(\textcolor{keyword}{new} \{success = \textcolor{keyword}{true}\});}
\DoxyCodeLine{00289         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a21e35248bf081cd805ef51cbeb87f729}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a21e35248bf081cd805ef51cbeb87f729}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!ErrorLogs@{ErrorLogs}}
\index{ErrorLogs@{ErrorLogs}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{ErrorLogs()}{ErrorLogs()}}
{\footnotesize\ttfamily IAction\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Error\+Logs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Controller Action for Error\+Logs 

\begin{DoxyReturn}{Returns}
View of type Dotnet\+Identity.\+Views.\+Admin.\+Errorogs
\end{DoxyReturn}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ae837cd1bca6ffa486e8ef1d124be8c45}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ae837cd1bca6ffa486e8ef1d124be8c45}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!GetAppLogs@{GetAppLogs}}
\index{GetAppLogs@{GetAppLogs}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{GetAppLogs()}{GetAppLogs()}}
{\footnotesize\ttfamily IAction\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Get\+App\+Logs (\begin{DoxyParamCaption}\item[{Data\+Request}]{request }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller Post Method to fetch Applicationlogs 


\begin{DoxyParams}{Parameters}
{\em request} & type Datatables\+Js.\+Data.\+Data\+Request\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Jason-\/\+Array of Datatables\+Js.\+Data.\+Data\+Result
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00125}{125}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00126         \{}
\DoxyCodeLine{00127             DataResult<AppLogs> result = \_context.\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context_affe1f37bcb45df0004280f3c94ebe49f}{AppLogs}}!.Where(l=>l.Message.ToLower().StartsWith(\textcolor{stringliteral}{"{}audit"{}})==\textcolor{keyword}{false} \&\& Convert.ToInt32(l.Level) < 4).ToDataResult(request);}
\DoxyCodeLine{00128             \textcolor{keywordflow}{return} Json(result);}
\DoxyCodeLine{00129         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a765780fbe678b84fb1532c873f761015}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a765780fbe678b84fb1532c873f761015}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!GetAuditLogs@{GetAuditLogs}}
\index{GetAuditLogs@{GetAuditLogs}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{GetAuditLogs()}{GetAuditLogs()}}
{\footnotesize\ttfamily IAction\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Get\+Audit\+Logs (\begin{DoxyParamCaption}\item[{Data\+Request}]{request }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller Post Method to fetch Audit\+Logs 


\begin{DoxyParams}{Parameters}
{\em request} & type Datatables\+Js.\+Data.\+Data\+Request\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Jason-\/\+Array of Datatables\+Js.\+Data.\+Data\+Result
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00137}{137}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00138         \{}
\DoxyCodeLine{00139             DataResult<AppLogs> result = \_context.\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context_affe1f37bcb45df0004280f3c94ebe49f}{AppLogs}}!.Where(l=>l.Message.ToLower().StartsWith(\textcolor{stringliteral}{"{}audit"{}})==\textcolor{keyword}{true}).ToDataResult(request);}
\DoxyCodeLine{00140             \textcolor{keywordflow}{return} Json(result);}
\DoxyCodeLine{00141         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a33a0ae1d862e6fc8fe837379f1e71871}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a33a0ae1d862e6fc8fe837379f1e71871}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!GetErrorLogs@{GetErrorLogs}}
\index{GetErrorLogs@{GetErrorLogs}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{GetErrorLogs()}{GetErrorLogs()}}
{\footnotesize\ttfamily IAction\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Get\+Error\+Logs (\begin{DoxyParamCaption}\item[{Data\+Request}]{request }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller Post Method to fetch Error\+Logs 


\begin{DoxyParams}{Parameters}
{\em request} & type Datatables\+Js.\+Data.\+Data\+Request\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Jason-\/\+Array of Datatables\+Js.\+Data.\+Data\+Result
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00113}{113}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00114         \{}
\DoxyCodeLine{00115             DataResult<AppLogs> result = \_context.\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context_affe1f37bcb45df0004280f3c94ebe49f}{AppLogs}}!.Where(l=>l.Message.ToLower().StartsWith(\textcolor{stringliteral}{"{}audit"{}})==\textcolor{keyword}{false} \&\& Convert.ToInt32(l.Level) == 4).ToDataResult(request);}
\DoxyCodeLine{00116             \textcolor{keywordflow}{return} Json(result);}
\DoxyCodeLine{00117         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ab36c5deb1c4f3f99e316543f66b40b58}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_ab36c5deb1c4f3f99e316543f66b40b58}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!GetUsers@{GetUsers}}
\index{GetUsers@{GetUsers}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{GetUsers()}{GetUsers()}}
{\footnotesize\ttfamily Json\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Get\+Users (\begin{DoxyParamCaption}\item[{Data\+Request}]{request }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller Post Method to fetch Users 


\begin{DoxyParams}{Parameters}
{\em request} & type Datatables\+Js.\+Data.\+Data\+Request\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
Jason-\/\+Array of Datatables\+Js.\+Data.\+Data\+Result
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00149}{149}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00149                                                         \{}
\DoxyCodeLine{00150             DataResult<AppUser> result = \_userManager.Users.ToDataResult(request);}
\DoxyCodeLine{00151             \textcolor{keywordflow}{return} Json(result);}
\DoxyCodeLine{00152         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a5f4b2842f8473f14a5e10470d3bd1d5b}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a5f4b2842f8473f14a5e10470d3bd1d5b}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!Index@{Index}}
\index{Index@{Index}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{Index()}{Index()}}
{\footnotesize\ttfamily IAction\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Index (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Controller Action for Index 

\begin{DoxyReturn}{Returns}
View of type Dotnet\+Identity.\+Views.\+Admin.\+Index
\end{DoxyReturn}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_adaca6a26e3d091e4670aa37d0aa26095}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_adaca6a26e3d091e4670aa37d0aa26095}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!NewUser@{NewUser}}
\index{NewUser@{NewUser}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{NewUser()}{NewUser()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+New\+User (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller Action for New\+User view 

\begin{DoxyReturn}{Returns}
view of type Dotnet\+Identity.\+Views.\+Admin.\+New\+User
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00158}{158}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00158                                                    \{}
\DoxyCodeLine{00159             var mod = \textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model}{NewUserModel}}();}
\DoxyCodeLine{00160             mod.Roles = await \_roleManager.Roles.Select(s => \textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_assign_role_view_model}{AssignRoleViewModel}}}
\DoxyCodeLine{00161             \{}
\DoxyCodeLine{00162                 RoleId = s.Id,}
\DoxyCodeLine{00163                 RoleName = s.Name,}
\DoxyCodeLine{00164                 IsAssigned = \textcolor{keyword}{false}}
\DoxyCodeLine{00165             \}).ToListAsync();}
\DoxyCodeLine{00166 }
\DoxyCodeLine{00167             \textcolor{keywordflow}{return} View(mod);}
\DoxyCodeLine{00168         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a64bc568ac775c29e358c37f1b6eb9a6f}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a64bc568ac775c29e358c37f1b6eb9a6f}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!NewUser@{NewUser}}
\index{NewUser@{NewUser}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{NewUser()}{NewUser()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily async Task$<$ Action\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+New\+User (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model}{New\+User\+Model}}}]{view\+Model }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



controler Post Method to save a new User 


\begin{DoxyParams}{Parameters}
{\em view\+Model} & type Dotnet\+Identity.\+Models.\+View\+Models.\+New\+User\+Model\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
view of type Dotnet\+Identity.\+Views.\+Admin.\+New\+User
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00176}{176}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00177         \{}
\DoxyCodeLine{00178             \textcolor{keywordflow}{if} (ModelState.IsValid)}
\DoxyCodeLine{00179             \{}
\DoxyCodeLine{00180                 var user = \textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_user}{AppUser}}();}
\DoxyCodeLine{00181                 user.IsEnabled = \textcolor{keyword}{true};}
\DoxyCodeLine{00182                 user.IsMfaForce = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a386700c6d1016a119610b19e33ebc07c}{IsMfaForce}};}
\DoxyCodeLine{00183                 user.IsLdapLogin = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_ac59fa961213dce0d9bad6383e15a2e98}{IsLdapLogin}};}
\DoxyCodeLine{00184                 user.FirstName = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a61504666821f8dc6d9d33b0a4cc77b3c}{FirstName}};}
\DoxyCodeLine{00185                 user.LastName = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_aceaf9427b3dabdece9e7ce7feef994e8}{LastName}};}
\DoxyCodeLine{00186                 user.Email = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a4efc9be88e208cf5c71d8e09ffbdbacf}{Email}};}
\DoxyCodeLine{00187                 user.EmailConfirmed = \textcolor{keyword}{true};}
\DoxyCodeLine{00188                 user.Gender = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a7ee12bb071a0973e4648e73d348a1d90}{Gender}};}
\DoxyCodeLine{00189                 user.Department = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a8f931f5e280c44a9fd20243fa58e4a67}{Department}}.ToString();}
\DoxyCodeLine{00190                 user.UserName = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a30f192b2fd398ca04a894b745ebc311d}{UserName}};}
\DoxyCodeLine{00191 }
\DoxyCodeLine{00192                 var result = await \_userManager.CreateAsync(user, viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a9a0dfca231dffeaf800f7b3ef3cfeb59}{Password}});}
\DoxyCodeLine{00193                 \textcolor{keywordflow}{if} (result.Succeeded)}
\DoxyCodeLine{00194                 \{}
\DoxyCodeLine{00195                     \textcolor{comment}{// roles}}
\DoxyCodeLine{00196                     \textcolor{keywordflow}{foreach} (var item \textcolor{keywordflow}{in} viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model_a5145932ec19e08d2424a891907457bd4}{Roles}})}
\DoxyCodeLine{00197                     \{}
\DoxyCodeLine{00198                         \textcolor{keywordflow}{if} (item.IsAssigned)}
\DoxyCodeLine{00199                         \{}
\DoxyCodeLine{00200                             await \_userManager.AddToRoleAsync(user, item.RoleName);}
\DoxyCodeLine{00201                         \}}
\DoxyCodeLine{00202                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{00203                         \{}
\DoxyCodeLine{00204                             await \_userManager.RemoveFromRoleAsync(user, item.RoleName);}
\DoxyCodeLine{00205                         \}}
\DoxyCodeLine{00206                     \}}
\DoxyCodeLine{00207                 \}}
\DoxyCodeLine{00208 }
\DoxyCodeLine{00209                 var createdUser = await \_userManager.FindByNameAsync(user.UserName);}
\DoxyCodeLine{00210                 \textcolor{keywordflow}{if}(createdUser!=\textcolor{keyword}{null}) \{}
\DoxyCodeLine{00211                     var rls = await \_userManager.GetRolesAsync(createdUser);}
\DoxyCodeLine{00212                     \textcolor{keywordflow}{if} (rls != \textcolor{keyword}{null})}
\DoxyCodeLine{00213                     \{}
\DoxyCodeLine{00214                         var rlsComb = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{00215                         \textcolor{keywordflow}{if} (rls.Count() > 0 \&\& rls.Count() <= 1)}
\DoxyCodeLine{00216                         \{}
\DoxyCodeLine{00217                             rlsComb = rls[0].ToString();}
\DoxyCodeLine{00218                         \}}
\DoxyCodeLine{00219                         \textcolor{keywordflow}{else}}
\DoxyCodeLine{00220                         \{}
\DoxyCodeLine{00221                             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < rls.Count; i++)}
\DoxyCodeLine{00222                             \{}
\DoxyCodeLine{00223                                 \textcolor{keywordflow}{if} (i + 1 != rls.Count) \{ rlsComb += rls[i] + \textcolor{stringliteral}{"{},"{}}; \}}
\DoxyCodeLine{00224                                 \textcolor{keywordflow}{else} \{ rlsComb += rls[i]; \}}
\DoxyCodeLine{00225                             \}}
\DoxyCodeLine{00226                         \}}
\DoxyCodeLine{00227                         \textcolor{keywordflow}{if} (rlsComb.Length > 0)}
\DoxyCodeLine{00228                         \{}
\DoxyCodeLine{00229                             createdUser.RolesCombined = rlsComb;}
\DoxyCodeLine{00230                             await \_userManager.UpdateAsync(createdUser);}
\DoxyCodeLine{00231                         \}}
\DoxyCodeLine{00232                     \}}
\DoxyCodeLine{00233                 \}}
\DoxyCodeLine{00234 }
\DoxyCodeLine{00235                 ViewData[\textcolor{stringliteral}{"{}message"{}}] = \_localizer[\textcolor{stringliteral}{"{}1"{}}];}
\DoxyCodeLine{00236                 \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} created new user "{}} + user.UserName);}
\DoxyCodeLine{00237             \}}
\DoxyCodeLine{00238             \textcolor{keywordflow}{return} View(\textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_new_user_model}{NewUserModel}}());}
\DoxyCodeLine{00239         \}}

\end{DoxyCode}


References \mbox{\hyperlink{_new_user_model_8cs_source_l00030}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Department}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00020}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Email}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00040}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+First\+Name}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00025}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Gender}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00050}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Is\+Ldap\+Login}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00055}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Is\+Mfa\+Force}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00045}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Last\+Name}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00060}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Password}}, \mbox{\hyperlink{_new_user_model_8cs_source_l00035}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+Roles}}, and \mbox{\hyperlink{_new_user_model_8cs_source_l00015}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+New\+User\+Model.\+User\+Name}}.

\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a35b4e53a2140e145b65b14f83f490c1e}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a35b4e53a2140e145b65b14f83f490c1e}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!Roles@{Roles}}
\index{Roles@{Roles}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{Roles()}{Roles()}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Roles (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Controller Action for Roles 

\begin{DoxyReturn}{Returns}
View of type Dotnet\+Identity.\+Views.\+Admin.\+Users
\end{DoxyReturn}
~\newline
 \mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a013444bd9f40b5a78e04c0c7a2463736}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a013444bd9f40b5a78e04c0c7a2463736}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!SystemLogs@{SystemLogs}}
\index{SystemLogs@{SystemLogs}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{SystemLogs()}{SystemLogs()}}
{\footnotesize\ttfamily IAction\+Result Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+System\+Logs (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Controller Action for System\+Logs 

\begin{DoxyReturn}{Returns}
View of type Dotnet\+Identity.\+Views.\+Admin.\+System\+Logs
\end{DoxyReturn}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a9da4db41821b95a045487b957546ad4e}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a9da4db41821b95a045487b957546ad4e}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!UpsertRole@{UpsertRole}}
\index{UpsertRole@{UpsertRole}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{UpsertRole()}{UpsertRole()}\hspace{0.1cm}{\footnotesize\ttfamily [1/2]}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Upsert\+Role (\begin{DoxyParamCaption}\item[{string?}]{id }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller Action for view Upsert\+Role 


\begin{DoxyParams}{Parameters}
{\em id} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
view of type Dotnetidentity.\+Views.\+Admin.\+Upsert\+Role
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00246}{246}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00247         \{}
\DoxyCodeLine{00248             \textcolor{keywordflow}{if} (\textcolor{keywordtype}{id} != \textcolor{keyword}{null})}
\DoxyCodeLine{00249             \{}
\DoxyCodeLine{00250                 var role = await \_roleManager.FindByIdAsync(\textcolor{keywordtype}{id});}
\DoxyCodeLine{00251                 \textcolor{keywordflow}{return} View(role.Adapt<\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model}{UpsertRoleViewModel}}>());}
\DoxyCodeLine{00252             \}}
\DoxyCodeLine{00253             }
\DoxyCodeLine{00254             \textcolor{keywordflow}{return} View(\textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model}{UpsertRoleViewModel}}());}
\DoxyCodeLine{00255         \}}

\end{DoxyCode}
\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a94f52c0e032a774cc8d1590d6688d101}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a94f52c0e032a774cc8d1590d6688d101}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!UpsertRole@{UpsertRole}}
\index{UpsertRole@{UpsertRole}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{UpsertRole()}{UpsertRole()}\hspace{0.1cm}{\footnotesize\ttfamily [2/2]}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Upsert\+Role (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model}{Upsert\+Role\+View\+Model}}}]{view\+Model }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



Controller POST Method to enable a user account 


\begin{DoxyParams}{Parameters}
{\em view\+Model} & tmodel of type Dotnetidentity.\+Models.\+View\+Models.\+Upsert\+Role\+View\+Model\\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
redirect to controller action Roles
\end{DoxyReturn}


Definition at line \mbox{\hyperlink{_admin_controller_8cs_source_l00365}{365}} of file \mbox{\hyperlink{_admin_controller_8cs_source}{Admin\+Controller.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00366         \{}
\DoxyCodeLine{00367             \textcolor{keywordflow}{if} (ModelState.IsValid)}
\DoxyCodeLine{00368             \{}
\DoxyCodeLine{00369                 var isUpdate = viewModel.Id != \textcolor{keyword}{null};}
\DoxyCodeLine{00370 }
\DoxyCodeLine{00371                 var role = isUpdate ? await \_roleManager.FindByIdAsync(viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model_a65cbdc82687f49cd26032a402a8f7741}{Id}}) : \textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_identity_1_1_app_role}{AppRole}}() \{ Name = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model_a1372e8f0ae5f5c399d5732a80850a31f}{Name}}, CreatedOn = DateTime.Now \};}
\DoxyCodeLine{00372 }
\DoxyCodeLine{00373                 \textcolor{keywordflow}{if} (isUpdate)}
\DoxyCodeLine{00374                 \{}
\DoxyCodeLine{00375                     role.Name = viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model_a1372e8f0ae5f5c399d5732a80850a31f}{Name}};}
\DoxyCodeLine{00376                 \}}
\DoxyCodeLine{00377 }
\DoxyCodeLine{00378                 var result = isUpdate ? await \_roleManager.UpdateAsync(role) : await \_roleManager.CreateAsync(role);}
\DoxyCodeLine{00379                 \textcolor{keywordflow}{if} (result.Succeeded)}
\DoxyCodeLine{00380                 \{                    }
\DoxyCodeLine{00381                     \textcolor{keywordflow}{if}(isUpdate) \{}
\DoxyCodeLine{00382                         \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} changed name of "{}} + viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model_a65cbdc82687f49cd26032a402a8f7741}{Id}} + \textcolor{stringliteral}{"{} to "{}} + viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model_a1372e8f0ae5f5c399d5732a80850a31f}{Name}});}
\DoxyCodeLine{00383                     \} \textcolor{keywordflow}{else} \{}
\DoxyCodeLine{00384                         \_logger.LogInformation(\textcolor{stringliteral}{"{}AUDIT: "{}} + User.Identity!.Name + \textcolor{stringliteral}{"{} created role "{}} + viewModel.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_view_models_1_1_upsert_role_view_model_a1372e8f0ae5f5c399d5732a80850a31f}{Name}});}
\DoxyCodeLine{00385                     \}}
\DoxyCodeLine{00386                     \textcolor{keywordflow}{return} RedirectToAction(\textcolor{stringliteral}{"{}Roles"{}});}
\DoxyCodeLine{00387                 \}}
\DoxyCodeLine{00388                 result.Errors.ToList().ForEach(f => ModelState.AddModelError(\textcolor{keywordtype}{string}.Empty, f.Description));}
\DoxyCodeLine{00389                 result.Errors.ToList().ForEach(f => TempData[\textcolor{stringliteral}{"{}Error"{}}] += f.Description);}
\DoxyCodeLine{00390             \}}
\DoxyCodeLine{00391             }
\DoxyCodeLine{00392             \textcolor{comment}{//return View(viewModel);}}
\DoxyCodeLine{00393             \textcolor{comment}{//return View("{}Roles"{}, await \_roleManager.Roles.ToListAsync());}}
\DoxyCodeLine{00394             \textcolor{keywordflow}{return} RedirectToAction(\textcolor{stringliteral}{"{}Roles"{}});}
\DoxyCodeLine{00395         \}}

\end{DoxyCode}


References \mbox{\hyperlink{_upsert_role_view_model_8cs_source_l00012}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Upsert\+Role\+View\+Model.\+Id}}, and \mbox{\hyperlink{_upsert_role_view_model_8cs_source_l00017}{Dot\+Net\+Identity.\+Models.\+View\+Models.\+Upsert\+Role\+View\+Model.\+Name}}.

\mbox{\Hypertarget{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a190d9931cae4a99e50d8f47730b8445e}\label{class_dot_net_identity_1_1_controllers_1_1_admin_controller_a190d9931cae4a99e50d8f47730b8445e}} 
\index{DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}!Users@{Users}}
\index{Users@{Users}!DotNetIdentity.Controllers.AdminController@{DotNetIdentity.Controllers.AdminController}}
\doxysubsubsection{\texorpdfstring{Users()}{Users()}}
{\footnotesize\ttfamily async Task$<$ IAction\+Result $>$ Dot\+Net\+Identity.\+Controllers.\+Admin\+Controller.\+Users (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}



Controller Action for Users 

\begin{DoxyReturn}{Returns}
View of type Dotnet\+Identity.\+Views.\+Admin.\+Users
\end{DoxyReturn}
