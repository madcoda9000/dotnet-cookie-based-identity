\hypertarget{_settings_service_8cs_source}{}\doxysection{Settings\+Service.\+cs}
\label{_settings_service_8cs_source}\index{/Users/sascha.heimann/Projects/dotnet-\/cookie-\/based-\/identity/DotNetIdentity/Services/SettingsService/SettingsService.cs@{/Users/sascha.heimann/Projects/dotnet-\/cookie-\/based-\/identity/DotNetIdentity/Services/SettingsService/SettingsService.cs}}

\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00001}00001 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_dot_net_identity_1_1_data}{DotNetIdentity.Data}};}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00002}00002 \textcolor{keyword}{using }\mbox{\hyperlink{namespace_dot_net_identity_1_1_models_1_1_business_models}{DotNetIdentity.Models.BusinessModels}};}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00004}00004 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_dot_net_identity_1_1_services_1_1_settings_service}{DotNetIdentity.Services.SettingsService}} \{}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00008}\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service}{00008}}     \textcolor{keyword}{public} \textcolor{keyword}{class }\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service}{SettingsService}} : \mbox{\hyperlink{interface_dot_net_identity_1_1_services_1_1_settings_service_1_1_i_settings_service}{ISettingsService}} \{}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00012}00012     \textcolor{keyword}{private} readonly Lazy<LdapSettings> \_ldapSettings;}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00017}\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a8c1185252a31e6e05c46e4c20331b758}{00017}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_business_models_1_1_ldap_settings}{LdapSettings}} \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a8c1185252a31e6e05c46e4c20331b758}{Ldap}} \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \_ldapSettings.Value; \} \}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00021}00021     \textcolor{keyword}{private} readonly Lazy<GlobalSettings> \_globalSettings;}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00026}\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a0c21a140efa1e50482935de29e586c55}{00026}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_business_models_1_1_global_settings}{GlobalSettings}} \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a0c21a140efa1e50482935de29e586c55}{Global}} \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \_globalSettings.Value; \} \}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00030}00030     \textcolor{keyword}{private} readonly Lazy<MailSettings> \_mailSettings;}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00035}\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_aeb3647a56baffb62c1dad995915ce91e}{00035}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_business_models_1_1_mail_settings}{MailSettings}} \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_aeb3647a56baffb62c1dad995915ce91e}{Mail}} \{ \textcolor{keyword}{get} \{ \textcolor{keywordflow}{return} \_mailSettings.Value; \} \}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00039}00039     \textcolor{keyword}{private} readonly \mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{AppDbContext}} \_unitOfWork;}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00040}00040 }
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00045}\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a9cddb7dc0447c0f9b2e52918d503f474}{00045}}     \textcolor{keyword}{public} \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a9cddb7dc0447c0f9b2e52918d503f474}{SettingsService}}(\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{AppDbContext}} unitOfWork)}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00046}00046     \{}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00047}00047         \textcolor{comment}{// ARGUMENT CHECKING SKIPPED FOR BREVITY}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00048}00048         \_unitOfWork = unitOfWork;}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00049}00049         \textcolor{comment}{// 3}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00050}00050         \_globalSettings = \textcolor{keyword}{new} Lazy<GlobalSettings>(CreateSettings<GlobalSettings>);}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00051}00051         \_mailSettings = \textcolor{keyword}{new} Lazy<MailSettings>(CreateSettings<MailSettings>);}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00052}00052         \_ldapSettings = \textcolor{keyword}{new} Lazy<LdapSettings>(CreateSettings<LdapSettings>);}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00053}00053     \}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00054}00054 }
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00059}\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a42d54242d6fed4fc7ca20575c1c5df3e}{00059}}     \textcolor{keyword}{public} async Task \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_settings_service_a42d54242d6fed4fc7ca20575c1c5df3e}{Save}}()}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00060}00060     \{}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00061}00061         \textcolor{comment}{// only save changes to settings that have been loaded}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00062}00062         \textcolor{keywordflow}{if} (\_globalSettings.IsValueCreated)}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00063}00063             await \_globalSettings.Value.Save(\_unitOfWork);}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00064}00064 }
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00065}00065         \textcolor{keywordflow}{if} (\_mailSettings.IsValueCreated)}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00066}00066             await \_mailSettings.Value.Save(\_unitOfWork);}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00067}00067 }
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00068}00068         \textcolor{keywordflow}{if} (\_ldapSettings.IsValueCreated)}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00069}00069             await \_ldapSettings.Value.Save(\_unitOfWork);}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00070}00070 }
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00071}00071         await \_unitOfWork.SaveChangesAsync();}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00072}00072     \}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00078}00078     \textcolor{keyword}{private} T CreateSettings<T>() where T : \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base}{AppSettingsBase}}, new()}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00079}00079     \{}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00080}00080         var settings = \textcolor{keyword}{new} T();}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00081}00081         settings.Load(\_unitOfWork);}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00082}00082         \textcolor{keywordflow}{return} settings;}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00083}00083     \}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00084}00084     \}}
\DoxyCodeLine{\Hypertarget{_settings_service_8cs_source_l00085}00085 \}}

\end{DoxyCode}
