\hypertarget{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base}{}\doxysection{Dot\+Net\+Identity.\+Services.\+Settings\+Service.\+App\+Settings\+Base Class Reference}
\label{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base}\index{DotNetIdentity.Services.SettingsService.AppSettingsBase@{DotNetIdentity.Services.SettingsService.AppSettingsBase}}


base class for Settings classes  




Inheritance diagram for Dot\+Net\+Identity.\+Services.\+Settings\+Service.\+App\+Settings\+Base\+:\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base__inherit__graph}
\end{center}
\end{figure}
\doxysubsection*{Public Member Functions}
\begin{DoxyCompactItemize}
\item 
\mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a4bca82517dd8dac6161d645f41370804}{App\+Settings\+Base}} ()
\begin{DoxyCompactList}\small\item\em class constructor \end{DoxyCompactList}\item 
virtual void \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a18a21c6bd03945faee7e4e2dbe194a01}{Load}} (\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{App\+Db\+Context}} unit\+Of\+Work)
\begin{DoxyCompactList}\small\item\em load method \end{DoxyCompactList}\item 
virtual async Task \mbox{\hyperlink{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a11843156e0de051e112588e4d52c6d37}{Save}} (\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{App\+Db\+Context}} unit\+Of\+Work)
\begin{DoxyCompactList}\small\item\em save method \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
base class for Settings classes 

Definition at line \mbox{\hyperlink{_app_settings_base_8cs_source_l00010}{10}} of file \mbox{\hyperlink{_app_settings_base_8cs_source}{App\+Settings\+Base.\+cs}}.



\doxysubsection{Constructor \& Destructor Documentation}
\mbox{\Hypertarget{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a4bca82517dd8dac6161d645f41370804}\label{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a4bca82517dd8dac6161d645f41370804}} 
\index{DotNetIdentity.Services.SettingsService.AppSettingsBase@{DotNetIdentity.Services.SettingsService.AppSettingsBase}!AppSettingsBase@{AppSettingsBase}}
\index{AppSettingsBase@{AppSettingsBase}!DotNetIdentity.Services.SettingsService.AppSettingsBase@{DotNetIdentity.Services.SettingsService.AppSettingsBase}}
\doxysubsubsection{\texorpdfstring{AppSettingsBase()}{AppSettingsBase()}}
{\footnotesize\ttfamily Dot\+Net\+Identity.\+Services.\+Settings\+Service.\+App\+Settings\+Base.\+App\+Settings\+Base (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}}



class constructor 



Definition at line \mbox{\hyperlink{_app_settings_base_8cs_source_l00024}{24}} of file \mbox{\hyperlink{_app_settings_base_8cs_source}{App\+Settings\+Base.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00025         \{}
\DoxyCodeLine{00026             var type = this.GetType();}
\DoxyCodeLine{00027             \_name = type.Name;}
\DoxyCodeLine{00028             \textcolor{comment}{// 2}}
\DoxyCodeLine{00029             \_properties = type.GetProperties();}
\DoxyCodeLine{00030         \}}

\end{DoxyCode}


\doxysubsection{Member Function Documentation}
\mbox{\Hypertarget{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a18a21c6bd03945faee7e4e2dbe194a01}\label{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a18a21c6bd03945faee7e4e2dbe194a01}} 
\index{DotNetIdentity.Services.SettingsService.AppSettingsBase@{DotNetIdentity.Services.SettingsService.AppSettingsBase}!Load@{Load}}
\index{Load@{Load}!DotNetIdentity.Services.SettingsService.AppSettingsBase@{DotNetIdentity.Services.SettingsService.AppSettingsBase}}
\doxysubsubsection{\texorpdfstring{Load()}{Load()}}
{\footnotesize\ttfamily virtual void Dot\+Net\+Identity.\+Services.\+Settings\+Service.\+App\+Settings\+Base.\+Load (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{App\+Db\+Context}}}]{unit\+Of\+Work }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



load method 


\begin{DoxyParams}{Parameters}
{\em unit\+Of\+Work} & type Db\+Context\\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_app_settings_base_8cs_source_l00036}{36}} of file \mbox{\hyperlink{_app_settings_base_8cs_source}{App\+Settings\+Base.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00037         \{}
\DoxyCodeLine{00038             \textcolor{comment}{// ARGUMENT CHECKING SKIPPED FOR BREVITY}}
\DoxyCodeLine{00039             \textcolor{comment}{// 3 get settings for this type name}}
\DoxyCodeLine{00040 }
\DoxyCodeLine{00041             var settings = unitOfWork.\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context_a5ded8087cb93926ee0c8da6d1904b67b}{AppSettings}}!.Where(w => w.Type == \_name).ToList();}
\DoxyCodeLine{00042 }
\DoxyCodeLine{00043             \textcolor{keywordflow}{foreach} (var propertyInfo \textcolor{keywordflow}{in} \_properties)}
\DoxyCodeLine{00044             \{}
\DoxyCodeLine{00045                 \textcolor{comment}{// get the setting from the settings list}}
\DoxyCodeLine{00046                 var setting = settings.SingleOrDefault(s => s.Name == propertyInfo.Name);}
\DoxyCodeLine{00047                 \textcolor{keywordflow}{if} (setting != \textcolor{keyword}{null})}
\DoxyCodeLine{00048                 \{}
\DoxyCodeLine{00049                     \textcolor{comment}{// 4 assign the setting values to the properties in the type inheriting this class}}
\DoxyCodeLine{00050                     propertyInfo.SetValue(\textcolor{keyword}{this}, Convert.ChangeType(setting.Value, propertyInfo.PropertyType));}
\DoxyCodeLine{00051                 \}}
\DoxyCodeLine{00052             \}}
\DoxyCodeLine{00053         \}}

\end{DoxyCode}


References \mbox{\hyperlink{_app_db_context_8cs_source_l00030}{Dot\+Net\+Identity.\+Data.\+App\+Db\+Context.\+App\+Settings}}.

\mbox{\Hypertarget{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a11843156e0de051e112588e4d52c6d37}\label{class_dot_net_identity_1_1_services_1_1_settings_service_1_1_app_settings_base_a11843156e0de051e112588e4d52c6d37}} 
\index{DotNetIdentity.Services.SettingsService.AppSettingsBase@{DotNetIdentity.Services.SettingsService.AppSettingsBase}!Save@{Save}}
\index{Save@{Save}!DotNetIdentity.Services.SettingsService.AppSettingsBase@{DotNetIdentity.Services.SettingsService.AppSettingsBase}}
\doxysubsubsection{\texorpdfstring{Save()}{Save()}}
{\footnotesize\ttfamily virtual async Task Dot\+Net\+Identity.\+Services.\+Settings\+Service.\+App\+Settings\+Base.\+Save (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context}{App\+Db\+Context}}}]{unit\+Of\+Work }\end{DoxyParamCaption})\hspace{0.3cm}{\ttfamily [inline]}, {\ttfamily [virtual]}}



save method 


\begin{DoxyParams}{Parameters}
{\em unit\+Of\+Work} & type Db\+Context\\
\hline
\end{DoxyParams}


Definition at line \mbox{\hyperlink{_app_settings_base_8cs_source_l00059}{59}} of file \mbox{\hyperlink{_app_settings_base_8cs_source}{App\+Settings\+Base.\+cs}}.


\begin{DoxyCode}{0}
\DoxyCodeLine{00060         \{}
\DoxyCodeLine{00061             \textcolor{comment}{// 5 load existing settings for this type}}
\DoxyCodeLine{00062             var settings = unitOfWork.\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context_a5ded8087cb93926ee0c8da6d1904b67b}{AppSettings}}!.Where(w => w.Type == \_name).ToList();}
\DoxyCodeLine{00063 }
\DoxyCodeLine{00064             \textcolor{keywordflow}{foreach} (var propertyInfo \textcolor{keywordflow}{in} \_properties)}
\DoxyCodeLine{00065             \{}
\DoxyCodeLine{00066                 \textcolor{keywordtype}{object} propertyValue = propertyInfo.GetValue(\textcolor{keyword}{this}, \textcolor{keyword}{null})!;}
\DoxyCodeLine{00067                 \textcolor{keywordtype}{string} value = (propertyValue == \textcolor{keyword}{null}) ? \textcolor{keyword}{null}! : propertyValue.ToString()!;}
\DoxyCodeLine{00068 }
\DoxyCodeLine{00069                 var setting = settings.SingleOrDefault(s => s.Name == propertyInfo.Name);}
\DoxyCodeLine{00070                 \textcolor{keywordflow}{if} (setting != \textcolor{keyword}{null})}
\DoxyCodeLine{00071                 \{}
\DoxyCodeLine{00072                     \textcolor{comment}{// 6 update existing value}}
\DoxyCodeLine{00073                     setting.Value = value;}
\DoxyCodeLine{00074                 \}}
\DoxyCodeLine{00075                 \textcolor{keywordflow}{else}}
\DoxyCodeLine{00076                 \{}
\DoxyCodeLine{00077                     \textcolor{comment}{// 7 create new setting}}
\DoxyCodeLine{00078                     var newSetting = \textcolor{keyword}{new} \mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_data_models_1_1_application_settings}{ApplicationSettings}}()}
\DoxyCodeLine{00079                     \{}
\DoxyCodeLine{00080                         Name = propertyInfo.\mbox{\hyperlink{class_dot_net_identity_1_1_models_1_1_data_models_1_1_application_settings_abfd2c331163c2e57b0e818039249f117}{Name}},}
\DoxyCodeLine{00081                         Type = \_name,}
\DoxyCodeLine{00082                         Value = value,}
\DoxyCodeLine{00083                     \};}
\DoxyCodeLine{00084                     await unitOfWork.\mbox{\hyperlink{class_dot_net_identity_1_1_data_1_1_app_db_context_a5ded8087cb93926ee0c8da6d1904b67b}{AppSettings}}!.AddAsync(newSetting);}
\DoxyCodeLine{00085                 \}}
\DoxyCodeLine{00086             \}}
\DoxyCodeLine{00087         \}}

\end{DoxyCode}


References \mbox{\hyperlink{_app_db_context_8cs_source_l00030}{Dot\+Net\+Identity.\+Data.\+App\+Db\+Context.\+App\+Settings}}, and \mbox{\hyperlink{_application_settings_8cs_source_l00012}{Dot\+Net\+Identity.\+Models.\+Data\+Models.\+Application\+Settings.\+Name}}.

